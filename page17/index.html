<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name='yandex-verification' content='4a3e9fdb2ed97f52' />

  <title>
    
      Главная &middot; MrDekk
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/mrdekk.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic&subset=latin,cyrillic-ext,latin-ext,cyrillic'>
  <link rel="stylesheet" href="/public/css/font-awesome.min.css" >

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <link rel="stylesheet" href="/public/css/tabs.css">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
	  <img class="profile" alt="my-profile" src="/media/images/brujo.jpg" width="120px">
      <h1>MrDekk</h1>
      <p class="description">Время - лучший учитель! Жаль, что оно убивает своих учеников...</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
        <a href="/"><i class="fa fa-home" ></i></a>
      </li>

      

      
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/about/">Кто здесь?</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
          
        
      
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/tags/">Метки</a>
            </li>
          
        
      
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/useful/">Полезное</a>
            </li>
          
        
      
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/awesome/">Awesome Stars</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </ul>

	<p class="social-icons">
		<!-- <a href="/search"><i class="fa fa-search fa-2x"></i></a> -->
		<a href="https://github.com/mrdekk"><i class="fa fa-github fa-2x"></i></a>
		<a href="https://twitter.com/mrdekk"><i class="fa fa-twitter fa-2x"></i></a>
		<a href="/atom.xml"><i class="fa fa-rss fa-2x"></i></a>
	</p>

    <p>&copy; 2024. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2012/01/14/scaleability-thoughts/">
        Мысли о масштабируемости
      </a>
    </h1>

    <i class="icon fa fa-calendar-o text-danger"></i><span class="post-date">14.01.2012</span>
	<i class="icon fa fa-tags text-success"></i><p class="entry-tags">
  	
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#architecture" title="Pages tagged architecture" rel="tag" class="text-success">architecture</a>
        </div>
        
      
    </p>

    <p><em>На просторах интернета наткнулся на замечательную статью про масштабируемость. Хочу представить Вам вольный ее перевод. Далее повествование идет от лица автора оригинальной статьи. Кроме того, под масштабирование вверх понимается вертикальное масштабирование, под масштабирование вширь – горизонтальное.</em></p>

<p>Все мы надеемся, что наши проекты будут успешны и превзойдут самые смелые наши ожидания. Всем известны стартапы, которые выходили на многомиллиардные IPO, и имели в своем парке сотни, тысячи и даже больше серверов. Каждый хостинг провайдер твердит нам о своих новых облачных технологиях, которые позволят выйти нам на вершины пройзводительности. Я создал и уничтожил много вещей за свою карьеру.</p>

<h3 id="build-it-to-break-стройте-так-чтобы-сломать">Build it to Break (Стройте так, чтобы сломать)</h3>

<p>Все что Вы делаете, рано или поздно сломается. Поэтому имейте это ввиду и будьте к этому готовы.</p>

<p>Когда это возможно, сделайте так, чтобы каждый слой приложения работал независимо, кроме того, следует озаботиться должным резервированием. Начните всего с двух – Web-сервера и сервера-приложений, иногда стоит добавить сервер баз данных. Как только Вы поймете, что в сущности все может сломаться и непременно сломается, Вы будете куда счастливее с тем, что у Вас есть, особенно, когда что-то пойдет не так. Хорошие приложение строятся с учетом того, что они могут сломаться. Системные архитекторы признают, что проблемы неизбежны. Это конечно не то, что мы хотим, но это то, что мы должны принять.</p>

<p>Распределенные архитектуры позволяют перемещать рабочие нагрузки между многими автономными серверами. Балансировщики нагрузки и Web-фермы позволяют управлять отказами на уровне серверов-приложений. В мире баз данных, мы можем управлять отказами с помощью кластеризации, зеркалирования и реплик в режиме только чтение.</p>

<h3 id="everything-is-a-feature-все--это-фича-отличительная-особенность">Everything is a Feature (Все – это фича, отличительная особенность)</h3>

<p>Как однажды лихо сказал Джефф Этвуд (Jeff Atwood), <a href="http://www.codinghorror.com/blog/2011/06/performance-is-a-feature.html">производительность – это фича</a>. Основная мысль Джеффа в том, что дать приложению максимальную производительность – это решение, которые Вы принимаете в процессе разработки. Поэтому, размышляя в том же ключе, сделать приложение отказоустойчивым – это тоже должно быть сознательным решением.</p>

<p>Посему, любое решение – это компромисс. Обзор всего приложения как ряд компромиссов ведет к лучшему пониманию того, как приложение будет работать в реальном мире. И разница в том, можно ли расширять приложение вверх и вширь закладывается именно в нескольких ключевых решениях, которые были сделаны на ранних стадиях разработки.</p>

<h3 id="scale-out-not-up-масштабируйте-вширь-но-не-вверх">Scale Out, Not Up (Масштабируйте вширь, но не вверх)</h3>

<p>Это не так аксиоматично, как кажется. Например, такие облачные сервисы как Azure или AWS являются одними из самых гибких ввиду того, что сервера можно добавлять и убавлять по необходимости, в ответ на запросы клиентов. Масштабирование вширь только тогда будет максимально эффективным, когда будет оставаться возможность дать обратный ход.</p>

<p>Самый простой способ масштабирования, как правило, находится на уровне приложений, требуется просто добавить еще серверов. Что происходит, когда возникает необходимость масштабировать базу данных? Нынешняя тенденция состоит в покупке более быстрого сервера с более быстрыми дисками и большим объемом памяти. И этот процесс постоянно повторяется. Надеюсь, что Ваша необходимость в новых серверах будет продолжаться в темпе, которые меньше, либо равен темпу инноваций. Есть и другие проблемы с масштабированием. В процессе повышения производительности, железо становится все более и более дорогим, однако удельный прирост производительности становится все меньше и меньше. Разница в цене между самым быстрым CPU и вторым самым быстрым CPU как правило куда больше, чем получаемый выигрыш в производительности – масштабирование вверх как правило имеет огромную стоимость.</p>

<p>Кроме масштабирования вверх существует масштабирование вширь. Когда мы говорим о масштабирование вширь, то для обработки дополнительной нагрузки просто добавляются дополнительные сервера. Один из простейших способов масштабировать вширь базу данных – это добавить реплики только для чтения. Запросы на запись обрабатываются на главном сервере, потому что масштабирование вширь записи может быть очень и очень сложным. Но что делать, если нам все-таки необходимо масштабировать вширь запись? К счастью, есть много методов для горизонтального масштабирования слоя базы данных. Фичи могут использовать разные хранилища данных, метаданные реплицируются между всеми серверами, в том время как бизнес данные разбиваются на шарды (shards). Кроме того, можно использовать автоматизированные техники, как например SQL Azure Federation.</p>

<p>Самой важной вещью, которую стоит непременно держать в голове, что возможность расширяться по необходимости также важно, как и заключать договора. По мере того, как бизнес будет расти, можно будет просто докупить серверов по мере роста нагрузки. Покупка нового оборудования, как правило, дешевле и быстрее, чем тюнинг кода. Однако, как только приложение достигнет зрелого уровня, важно оттюнить приложение для использования меньшего количества ресурсов. Меньше аппаратуры означает меньше ее поддержки. Меньше аппаратуры – меньше затраты. Никто не хочет сталкиваться с другой возможностью, однако, бизнес может сократится. Пользовательская база может уменьшиться. Способность бизнеса реагировать на изменение затрат, может стать решающим отличием между успешным средним бизнесом, и провалившимся большим.</p>

<h3 id="buy-more-storage-покупайте-больше-жестких-дисков">Buy more storage (Покупайте больше жестких дисков)</h3>

<p>В дополнении к масштабированию вширь серверов, масштабируйте вширь систему хранения. Если Вы стоите перед выбором купить несколько больших дисков или много маленьких – выберите второй вариант. Большее количество мелких быстрых дисков будут в состоянии быстрее обрабатывать запросы ввода/вывода. Большее количество дисков, работающих вместе, означает также и то, что с каждого из дисков будет считано меньше данных.</p>

<p>Хитрость в том, что современные системы управления базами данных могут умело распределять нагрузку между несколькими файлами или даже дисками. Если в процесс считывания данных вовлечено несколько файлов/дисков/шпинделей/логических томов, то данные будут считаны быстрее, чем если бы был вовлечен только один большой диск. Принцип горизонтального масштабирования лучше вертикального масштабирования даже на уровне системы хранения – несколько дисков, как правило, быстрее чем один большой.</p>

<h3 id="youre-going-to-do-it-wrong-вы-все-равно-сделаете-это-неправильно">You’re Going to Do It Wrong (Вы все равно сделаете это неправильно)</h3>

<p>Вне зависимости от того, насколько умна и опытна Ваша команда, будьте готовы к ошибкам. Существует всего несколько жестких и быстрых реализаций принципов масштабирования бизнеса. Будьте готовы попробовать несколько идей, прежде чем найдете то правильное сочетание техники и технологий, которые будут работать хорошо. Вы конечно можете получить это сочетание и при первой попытке. Хотя обычно, надо сделать несколько попыток. Но, в любом случае, будьте готовы вернуться к рассмотрению идеи.</p>

<p>Поэтому, будьте готовы переписать ядро приложения при масштабировании. Твиттер был изначально построен на Ruby On Rails. С течением времени, они <a href="http://blog.evanweaver.com/2009/03/13/qcon-presentation/">реализовали различные части приложения с помощью разных инструментов</a>. Готовность Twitter переписать основные компоненты свой инфраструктуры, стала важной частью успеха.</p>

<p>Не бойтесь изменений – делайте их. (Don’t be afraid to change everything)</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2011/11/13/oracle-tables-in-current-connection/">
        Получение списка таблиц в текущем подключении ORACLE
      </a>
    </h1>

    <i class="icon fa fa-calendar-o text-danger"></i><span class="post-date">13.11.2011</span>
	<i class="icon fa fa-tags text-success"></i><p class="entry-tags">
  	
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#oracle" title="Pages tagged oracle" rel="tag" class="text-success">oracle</a>
        </div>
        &nbsp;
      
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#sql" title="Pages tagged sql" rel="tag" class="text-success">sql</a>
        </div>
        &nbsp;
      
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#java" title="Pages tagged java" rel="tag" class="text-success">java</a>
        </div>
        
      
    </p>

    <p>Появилась тут одна задача связанная с Oracle и Java. В процессе ее решения потребовались некоторые кусочки кода, которые я и хочу предложить читателям. Вдруг куда понадобятся.</p>

<p>Подключение к Oracle (Java) (Проверка на ошибки и прочая мишура намеренно опущены)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span> <span class="s">"oracle.jdbc.driver.OracleDriver"</span> <span class="o">);</span>
<span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"jdbc:oracle:thin:@"</span> <span class="o">+</span> <span class="n">server</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">port</span> <span class="o">+</span> <span class="s">":"</span> <span class="n">sid</span><span class="o">;</span>
<span class="nc">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span> <span class="n">url</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">password</span> <span class="o">);</span>
</code></pre></div></div>

<p>Получение таблиц в текущем подключении</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Statement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">createStatement</span><span class="o">(</span> <span class="o">);</span>

<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span> <span class="s">"select TABLE_NAME from TABS"</span> <span class="o">);</span>
<span class="k">while</span> <span class="o">(</span> <span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">(</span> <span class="o">)</span> <span class="o">)</span>
<span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span> <span class="s">"TABLE_NAME"</span> <span class="o">)</span> <span class="o">);</span>
<span class="o">}</span>

<span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">(</span> <span class="o">);</span>
<span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">stmt</span><span class="o">.</span><span class="na">close</span><span class="o">(</span> <span class="o">);</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2011/09/18/git-push-problem/">
        Проблема с git push
      </a>
    </h1>

    <i class="icon fa fa-calendar-o text-danger"></i><span class="post-date">18.09.2011</span>
	<i class="icon fa fa-tags text-success"></i><p class="entry-tags">
  	
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#git" title="Pages tagged git" rel="tag" class="text-success">git</a>
        </div>
        
      
    </p>

    <p>Решил тут запушить на удаленный репозиторий большое количество файлов, однако гит ругнулся с примерно следующей ошибкой:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>error: RPC failed; result=22, HTTP code = 411
</code></pre></div></div>

<p>Оказалось, что проблема в больших файлах, чтобы это дело обойти надо сделать в репозитории примерно следующее</p>

<div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">config</span> <span class="n">http</span>.<span class="n">postBuffer</span> <span class="m">524288000</span>
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2011/09/12/happy-coders-day/">
        С Днем Программиста! Ура!
      </a>
    </h1>

    <i class="icon fa fa-calendar-o text-danger"></i><span class="post-date">12.09.2011</span>
	<i class="icon fa fa-tags text-success"></i><p class="entry-tags">
  	
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#holidays" title="Pages tagged holidays" rel="tag" class="text-success">holidays</a>
        </div>
        
      
    </p>

    <p><img src="/media/images/happy-coders-day.gif" alt="happy coders day" /></p>

<p>Вот и наступил 256 день в году, а значит уже в третий раз официально – День Программиста. Посему поздравляю всех коллег по цеху с этим знаменательным днем.</p>

<p>Хочу пожелать всем программистам нашей необъятной страны вежливых пользователей, хорошего кода, ну а самое главное – счастья не только в коде, но и в жизни.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2011/09/10/pencil-testing/">
        Тестирование карандаша
      </a>
    </h1>

    <i class="icon fa fa-calendar-o text-danger"></i><span class="post-date">10.09.2011</span>
	<i class="icon fa fa-tags text-success"></i><p class="entry-tags">
  	
  	  <div class="label bg-success">
  	    <a href="http://mrdekk.ru/tags/#QA" title="Pages tagged QA" rel="tag" class="text-success">QA</a>
        </div>
        
      
    </p>

    <p>При разработке программного обеспечения кроме самой проектирования и программирования следует уделять внимание тестированию. Однако, задумывались ли Вы о том, что и обычные вещи тоже можно потестировать. Например – карандаш.</p>

<p>Совсем недавно мне показали одну очень интересную картинку про то, как можно протестировать карандаш, вот она:</p>

<p><img src="/media/images/pencil.png" alt="pencil testing" /></p>

<p>Автора увы не записал тогда, поэтому если Вы автор этой картинки – прошу сообщить мне, я с удовольствием впишу Вас как автора.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page18"><i class="fa fa-hand-o-left" ></i> назад</a>
  
  
    
      <a class="pagination-item newer" href="/page16">вперед <i class="fa fa-hand-o-right" ></i></a>
    
  
</div>

    </div>

	<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter13259782 = new Ya.Metrika({
                    id:13259782,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    webvisor:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/13259782" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-16734363-2', 'auto');
  ga('send', 'pageview');

</script>

    <script src="/public/js/tabs.js"></script>

  </body>
</html>
